<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AlsaTrade - Trading Dashboard</title>
  <link rel="stylesheet" href="styles_new.css" />
</head>
<body>
  <main class="app-container">
    <!-- Header with Status -->
    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">AlsaTrade Dashboard</h1>
        <div class="status-section">
          <div class="connection-status">
            <span class="status-dot" id="connection-indicator"></span>
            <span class="status-label" id="connection-label">Loading...</span>
          </div>
          <div class="last-updated">
            <small>Last updated: <time id="last-updated">--</time></small>
          </div>
          <div class="environment-pill" id="environment-pill" hidden></div>
        </div>
      </div>
    </header>

    <!-- Hero Metrics Bar -->
    <div class="hero-metrics-bar" aria-live="polite">
      <article class="metric"><span class="metric-label">Product</span><span class="metric-value" id="hero-product">--</span></article>
      <article class="metric"><span class="metric-label">Strategy</span><span class="metric-value" id="hero-strategy">--</span></article>
      <article class="metric"><span class="metric-label">Long</span><span class="metric-value" id="hero-long">Off</span></article>
      <article class="metric"><span class="metric-label">Short</span><span class="metric-value" id="hero-short">Off</span></article>
      <article class="metric"><span class="metric-label">Total</span><span class="metric-value" id="hero-total-allocation">0%</span></article>
      <article class="metric"><span class="metric-label">Wallet</span><span class="metric-value metric-value--accent" id="hero-wallet">--</span></article>
      <article class="metric"><span class="metric-label">Available</span><span class="metric-value" id="hero-available">--</span></article>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Navigation Tabs -->
      <nav class="tab-navigation" role="tablist">
        <button class="tab-button active" role="tab" data-tab="setup" aria-selected="true" id="tab-setup">
          <span class="tab-icon">‚öôÔ∏è</span>
          Strategy Setup
        </button>
        <button class="tab-button" role="tab" data-tab="allocation" aria-selected="false" id="tab-allocation">
          <span class="tab-icon">üí∞</span>
          Capital Allocation
        </button>
        <button class="tab-button" role="tab" data-tab="executions" aria-selected="false" id="tab-executions">
          <span class="tab-icon">üìä</span>
          Trade Executions
        </button>
        <button class="tab-button" role="tab" data-tab="monitoring" aria-selected="false" id="tab-monitoring">
          <span class="tab-icon">üìà</span>
          Monitoring
        </button>
        <button class="tab-button" role="tab" data-tab="settings" aria-selected="false" id="tab-settings">
          <span class="tab-icon">üîß</span>
          Settings
        </button>
      </nav>

      <!-- Tab Panels -->
      <div class="tab-content">

        <!-- Strategy Setup Tab -->
        <div class="tab-panel active" id="panel-setup" role="tabpanel">
          <div class="setup-grid">
            <!-- Product Selection -->
            <div class="config-card">
              <h3>Select Product</h3>
              <div class="product-grid">
                <button class="product-item" data-product="BTC">BTC</button>
                <button class="product-item" data-product="ETH">ETH</button>
                <button class="product-item" data-product="XRP">XRP</button>
                <button class="product-item" data-product="SOL">SOL</button>
                <button class="product-item" data-product="BNB">BNB</button>
                <button class="product-item" data-product="DOGE">DOGE</button>
                <button class="product-item" data-product="NIFTY">NIFTY</button>
                <button class="product-item" data-product="BANKNIFTY">BANKNIFTY</button>
                <button class="product-item" data-product="NASDAQ">NASDAQ</button>
                <button class="product-item" data-product="S&P">S&P</button>
                <button class="product-item" data-product="DJ 30">DJ 30</button>
                <button class="product-item" data-product="OPTIONS">OPTIONS</button>
              </div>
              <div class="selected-product">
                <span class="label">Selected:</span>
                <span class="value" id="selected-product">None</span>
              </div>
            </div>

            <!-- Strategy Selection -->
            <div class="config-card">
              <h3>Select SaaS Strategy</h3>
              <div class="strategy-list">
                <button class="strategy-item" data-strategy="ALSAPRO 1">ALSAPRO 1</button>
                <button class="strategy-item" data-strategy="ALSAPRO 2">ALSAPRO 2</button>
                <button class="strategy-item" data-strategy="ALSAPRO 3">ALSAPRO 3</button>
                <button class="strategy-item" data-strategy="ALSAPRO 4">ALSAPRO 4</button>
                <button class="strategy-item" data-strategy="ALSAPRO 5">ALSAPRO 5</button>
              </div>
              <div class="selected-strategy">
                <span class="label">Selected:</span>
                <span class="value" id="selected-strategy">None</span>
              </div>
            </div>

            <!-- Direction Selection -->
            <div class="config-card">
              <h3>Select Long/Short</h3>
              <div class="direction-options">
                <label class="direction-option">
                  <input type="radio" name="direction" value="allow_long_short" />
                  <span class="option-text">Allow Long & Short</span>
                </label>
                <label class="direction-option">
                  <input type="radio" name="direction" value="allow_long_only" />
                  <span class="option-text">Allow Long Only</span>
                </label>
                <label class="direction-option">
                  <input type="radio" name="direction" value="allow_short_only" />
                  <span class="option-text">Allow Short Only</span>
                </label>
              </div>
            </div>

            <!-- Leverage Selection -->
            <div class="config-card">
              <h3>Select Leverage</h3>
              <div class="leverage-grid">
                <button class="leverage-item" data-leverage="0.5">0.5x</button>
                <button class="leverage-item" data-leverage="1">1x</button>
                <button class="leverage-item" data-leverage="2">2x</button>
                <button class="leverage-item" data-leverage="3">3x</button>
                <button class="leverage-item" data-leverage="4">4x</button>
                <button class="leverage-item" data-leverage="5">5x</button>
              </div>
              <div class="selected-leverage">
                <span class="label">Selected:</span>
                <span class="value" id="selected-leverage">1x</span>
              </div>
            </div>

            <!-- Capital Allocation -->
            <div class="config-card">
              <h3>Select Capital Allocation</h3>
              <div class="allocation-control">
                <input type="range" id="capital-slider" min="1" max="100" value="10" class="capital-range" />
                <div class="allocation-display">
                  <span class="allocation-value" id="allocation-value">10%</span>
                </div>
                <div class="allocation-presets">
                  <button class="preset-btn" data-allocation="5">5%</button>
                  <button class="preset-btn" data-allocation="10">10%</button>
                  <button class="preset-btn" data-allocation="25">25%</button>
                  <button class="preset-btn" data-allocation="50">50%</button>
                  <button class="preset-btn" data-allocation="100">100%</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-panel">
            <button class="btn btn-primary" id="save-config">Save Configuration</button>
            <button class="btn btn-secondary" id="reset-config">Reset to Defaults</button>
          </div>
        </div>

        <!-- Capital Allocation Tab -->
        <div class="tab-panel" id="panel-allocation" role="tabpanel">
          <div class="allocation-content">
            <div class="allocation-header">
              <h2>Master Capital Allocation</h2>
              <div class="total-allocation-display">
                <span class="total-label">Total Allocated:</span>
                <span class="total-value" id="master-total">0%</span>
                <span class="allocation-warning" id="allocation-warning" style="display: none;">‚ö†Ô∏è Exceeds 100%</span>
              </div>
            </div>

            <div class="allocation-grid">
              <!-- Primary Strategy -->
              <div class="allocation-card primary">
                <div class="card-header">
                  <h3>Primary Strategy</h3>
                  <span class="strategy-name" id="primary-strategy-display">--</span>
                </div>
                <div class="allocation-controls">
                  <div class="slider-container">
                    <input type="range" id="primary-allocation" min="0" max="100" value="0" />
                    <div class="slider-labels">
                      <span>0%</span>
                      <span>50%</span>
                      <span>100%</span>
                    </div>
                  </div>
                  <div class="allocation-input">
                    <input type="number" id="primary-allocation-input" min="0" max="100" value="0" />
                    <span>%</span>
                  </div>
                </div>
                <div class="allocation-breakdown">
                  <div class="breakdown-item">
                    <span>Long: <span id="primary-long-allocation">0%</span></span>
                  </div>
                  <div class="breakdown-item">
                    <span>Short: <span id="primary-short-allocation">0%</span></span>
                  </div>
                </div>
              </div>

              <!-- Additional Strategies -->
              <div class="additional-strategies">
                <div class="section-header">
                  <h3>Additional Strategies</h3>
                  <button class="btn btn-small" id="add-strategy">+ Add Strategy</button>
                </div>
                <div class="strategies-list" id="additional-strategies-list">
                  <div class="empty-state">
                    <p>No additional strategies configured</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Trade Executions Tab -->
        <div class="tab-panel" id="panel-executions" role="tabpanel">
          <div class="executions-content">
            <div class="executions-header">
              <h2>Trade Executions</h2>
              <div class="executions-controls">
                <button class="btn btn-small" id="toggle-timing">Show Timing</button>
                <button class="btn btn-small" id="toggle-details">Show Details</button>
                <button class="btn btn-small" id="refresh-executions">Refresh</button>
                <span class="executions-count" id="executions-count">0 executions</span>
              </div>
            </div>
            <div class="executions-list">
              <ul id="execution-log" class="execution-log">
                <li class="empty-state">Waiting for trade executions...</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Monitoring Tab -->
        <div class="tab-panel" id="panel-monitoring" role="tabpanel">
          <div class="monitoring-content">
            <div class="monitoring-grid">
              <!-- Account Summary -->
              <div class="monitoring-card">
                <h3>Account Summary</h3>
                <div class="summary-items">
                  <div class="summary-item">
                    <span class="label">Wallet Balance:</span>
                    <span class="value" id="wallet-balance">--</span>
                  </div>
                  <div class="summary-item">
                    <span class="label">Available Balance:</span>
                    <span class="value" id="available-balance">--</span>
                  </div>
                  <div class="summary-item">
                    <span class="label">Total P&L:</span>
                    <span class="value" id="total-pnl">--</span>
                  </div>
                </div>
              </div>

              <!-- Strategy Status -->
              <div class="monitoring-card">
                <h3>Strategy Status</h3>
                <div class="status-items">
                  <div class="status-item">
                    <span class="label">Active Product:</span>
                    <span class="value" id="active-product">--</span>
                  </div>
                  <div class="status-item">
                    <span class="label">Active Strategy:</span>
                    <span class="value" id="active-strategy">--</span>
                  </div>
                  <div class="status-item">
                    <span class="label">Position Mode:</span>
                    <span class="value" id="position-mode">--</span>
                  </div>
                </div>
              </div>

              <!-- Recent Activity -->
              <div class="monitoring-card full-width">
                <h3>Recent Activity</h3>
                <div class="activity-feed">
                  <ul id="activity-log" class="activity-list">
                    <li class="empty-state">No recent activity</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-panel" id="panel-settings" role="tabpanel">
          <div class="settings-content">
            <div class="settings-sections">
              <!-- API Configuration -->
              <div class="settings-section">
                <h3>API Configuration</h3>
                <div class="setting-item">
                  <label>Binance API Status:</label>
                  <span class="status-indicator" id="api-status">Checking...</span>
                </div>
                <div class="setting-item">
                  <label>Testnet Mode:</label>
                  <span id="testnet-status">--</span>
                </div>
              </div>

              <!-- System Settings -->
              <div class="settings-section">
                <h3>System Settings</h3>
                <div class="setting-item">
                  <label>Auto-refresh Interval:</label>
                  <select id="refresh-interval">
                    <option value="5000">5 seconds</option>
                    <option value="10000">10 seconds</option>
                    <option value="30000">30 seconds</option>
                    <option value="60000">1 minute</option>
                  </select>
                </div>
                <div class="setting-item">
                  <button class="btn btn-secondary" id="clear-cache">Clear Cache</button>
                  <button class="btn btn-secondary" id="export-config">Export Config</button>
                </div>
              </div>

              <!-- Actions -->
              <div class="settings-section">
                <h3>Actions</h3>
                <div class="action-buttons">
                  <button class="btn btn-primary" id="refresh-all">Refresh All Data</button>
                  <button class="btn btn-secondary" id="reset-preferences">Reset Preferences</button>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- Toast Messages -->
  <div id="toast" class="toast" role="status" aria-live="assertive" hidden></div>

  <!-- Loading Overlay -->
  <div id="screen-loader" class="screen-loader" hidden>
    <div class="spinner"></div>
  </div>

  <script src="app_new.js"></script>
</body>
</html>